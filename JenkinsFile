pipeline {
    agent any
    stages {
        stage ("Shell execute"){
            steps {
                script{
                    catchError(buildResult:'SUCCESS', stageResult: 'FAILURE')
                        {
                        sh "c++ -I /var/lib/jenkins/workspace/Boost_unit_test SampleTest.cpp -o example"
                        sh "date >> TestFile.txt"
                        sh "file -i example"
                        sh "cat example"
                        sh "iconv -f ELF64 -t UTF-8//TRANSLIT example -o TestFile.txt"
                        sh "cat TestFile.txt"
                        sh "file -i TestFile.txt"
                        }
                }
            }
        }
        stage ("Saving Artifacts") {
            steps {
                archiveArtifacts artifacts: "TestFile.txt", allowEmptyArchive: true, onlyIfSuccessful: false
            }
        }
    }
}
